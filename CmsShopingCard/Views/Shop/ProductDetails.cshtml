@model CmsShopingCard.Models.ViewModels.Shop.ProductVM

@{
    ViewBag.Title = Model.Name;
}
@if (TempData["SM"] != null)
{
    <div class="alert alert-danger">
        @TempData["SM"]
    </div>
}

@Html.HiddenFor(model => model.Quantity, new { id = "product-quantity-hidden" })

@Html.HiddenFor(model => model.Id, new { id = "product-id-hidden" })

<!-- Single Product Section Start -->
<div class="product-section section mt-90 mb-90">
    <div class="container">

        <div class="row mb-30">

            <div class="col-lg-6 col-12 mb-50">

                <!-- Image -->
                <div class="single-product-image thumb-right">

                    <div class="tab-content">
                        <div id="single-image-1" class="tab-pane fade show active big-image-slider">
                            <div class="big-image">
                                <img class="rounded" src="/Images/Uploads/Products/@Model.Id/Thumbs/@Model.ImageName" />
                                <a href="assets/images/single-product/big-1.png" class="big-image-popup">
                                    <i class="fa fa-search-plus"></i>
                                </a>
                            </div>


                        </div>

                    </div>


                </div>

            </div>

            <div class="col-lg-6 col-12 mb-50">

                <!-- Content -->
                <div class="single-product-content">

                    <!-- Category & Title -->
                    <div class="head-content">

                        <div class="category-title">
                            <a href="#" class="cat">@Model.CategoryName</a>
                            @if (@Model.Brand != null)
                            {
                                <span>/@Model.Brand.Name</span>
                            }

                            <h5 class="title">@Model.Name</h5>
                        </div>

                        <h5 class="price">$@Model.Price</h5>

                    </div>

                    <div class="single-product-description">

                        <div class="ratting">
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star-o"></i>
                        </div>

                        <div class="desc">
                            <p>enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia res eos qui ratione voluptatem sequi Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora inform </p>
                        </div>

                        <span class="availability">Availability: <span>In Stock</span></span>

                        <!--Alert Message-->
                        <div class="alert alert-danger ajax-message text-center font-weight-bold" style="display:none">
                            <span></span>
                        </div>
                        <!--End Alert Message-->


                        <div class="quantity-colors">
                            @if (User.Identity.IsAuthenticated && Model.Quantity > 0)
                            {
                                <div class="quantity">
                                    <h5>Quantity</h5>
                                    <div class="pro-qty">
                                        <input id="qty-input" type="number" value="1" min="1" max="@Model.Quantity" data-old-val="" data-max-value="@Model.Quantity">
                                    </div>
                                </div>
                            }
                            <div class="colors">
                                <h5>Color</h5>
                                <select class="nice-select">
                                    <option>red</option>
                                    <option>black</option>
                                    <option>yellow</option>
                                    <option>grey</option>
                                </select>
                            </div>

                        </div>

                        @if (Model.Quantity > 0)
                        {
                            if (Model.Quantity <= 7)
                            {
                                <h4 class="txtColor_alert">Only <span>@Model.Quantity</span> left in stock!</h4>
                            }
                            if (true)
                            {
                               

                                <div class="actions">

                                    <a href="#" class="add-to-cart addToCard" data-product-id="@Model.Id" data-product-name="@Model.Name" ><i class="ti-shopping-cart"></i><span>ADD TO CART</span></a>

                                    <div class="wishlist-compare">
                                        <a href="#" data-tooltip="Compare"><i class="ti-control-shuffle"></i></a>
                                        <a href="#" data-tooltip="Wishlist"><i class="ti-heart"></i></a>
                                    </div>

                                </div>

                                <div class="loader">
                                    <img src="~/AppImg/Spinner-0.8s-197px.gif" width="100" />
                                </div>
                            }
                            else
                            {
                                <h3 class="txtColor_alert">Please Login to Can add this item to Card</h3>
                            }
                        }
                        else
                        {
                            <h4 class="txtColor_alert">This Product Not Available In Stock Now</h4>
                        }


                        <div class="tags">

                            <h5>Tags:</h5>
                            <a href="#">Electronic</a>
                            <a href="#">Smartphone</a>
                            <a href="#">Phone</a>
                            <a href="#">Charger</a>
                            <a href="#">Powerbank</a>

                        </div>

                        <div class="share">

                            <h5>Share: </h5>
                            <a href="#"><i class="fa fa-facebook"></i></a>
                            <a href="#"><i class="fa fa-twitter"></i></a>
                            <a href="#"><i class="fa fa-instagram"></i></a>
                            <a href="#"><i class="fa fa-google-plus"></i></a>

                        </div>

                    </div>

                </div>

            </div>

        </div>


        <!----------Product Gallery-------->
        <div class="row mb-90">
            <div class="col-12 mx-auto">
                <div class="product-gallery fancyBoxDiv">

                    @foreach (var Image in Model.GalleryImages)
                    {
                        <div class="fancyBox fancyBox-child">
                            <a class="fancybox" rel="gallery1" href="/Images/Uploads/Products/@Model.Id/Gallery/@Image">

                                <img class="img-thumbnail" src="/Images/Uploads/Products/@Model.Id/Gallery/Thumbs/@Image" width="300" height="300" />
                            </a>
                        </div>
                    }
                </div>


            </div>
        </div>

        <!----------End Product Gallery-------->

        <div class="row">

            <div class="col-lg-12 col-12 ml-auto mr-auto">

                <ul class="single-product-tab-list nav">
                    <li><a href="#product-description" class="active" data-toggle="tab">description</a></li>
                    <li><a href="#product-specifications" data-toggle="tab">specifications</a></li>
                    <li><a href="#product-reviews" data-toggle="tab">reviews</a></li>
                </ul>

                <div class="single-product-tab-content tab-content">
                    <div class="tab-pane fade show active" id="product-description">

                        <div class="row">
                            <div class="single-product-description-content col-12">
                                @Html.Raw(Model.Description)

                            </div>


                        </div>

                    </div>
                    <div class="tab-pane fade" id="product-specifications">
                        <div class="single-product-specification">
                            <ul>
                                <li>Full HD Camcorder</li>
                                <li>Dual Video Recording</li>
                                <li>X type battery operation</li>
                                <li>Full HD Camcorder</li>
                                <li>Dual Video Recording</li>
                                <li>X type battery operation</li>
                            </ul>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="product-reviews">

                        <div class="product-ratting-wrap">
                            <div class="pro-avg-ratting">
                                <h4>4.5 <span>(Overall)</span></h4>
                                <span>Based on 9 Comments</span>
                            </div>
                            <div class="ratting-list">
                                <div class="sin-list float-left">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <span>(5)</span>
                                </div>
                                <div class="sin-list float-left">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-o"></i>
                                    <span>(3)</span>
                                </div>
                                <div class="sin-list float-left">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                    <span>(1)</span>
                                </div>
                                <div class="sin-list float-left">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                    <span>(0)</span>
                                </div>
                                <div class="sin-list float-left">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                    <span>(0)</span>
                                </div>
                            </div>
                            <div class="rattings-wrapper">

                                <div class="sin-rattings">
                                    <div class="ratting-author">
                                        <h3>Cristopher Lee</h3>
                                        <div class="ratting-star">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <span>(5)</span>
                                        </div>
                                    </div>
                                    <p>enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia res eos qui ratione voluptatem sequi Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci veli</p>
                                </div>

                                <div class="sin-rattings">
                                    <div class="ratting-author">
                                        <h3>Nirob Khan</h3>
                                        <div class="ratting-star">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <span>(5)</span>
                                        </div>
                                    </div>
                                    <p>enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia res eos qui ratione voluptatem sequi Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci veli</p>
                                </div>

                                <div class="sin-rattings">
                                    <div class="ratting-author">
                                        <h3>MD.ZENAUL ISLAM</h3>
                                        <div class="ratting-star">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <span>(5)</span>
                                        </div>
                                    </div>
                                    <p>enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia res eos qui ratione voluptatem sequi Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci veli</p>
                                </div>

                            </div>
                            <div class="ratting-form-wrapper fix">
                                <h3>Add your Comments</h3>
                                <form action="#">
                                    <div class="ratting-form row">
                                        <div class="col-12 mb-15">
                                            <h5>Rating:</h5>
                                            <div class="ratting-star fix">
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                                <i class="fa fa-star-o"></i>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-12 mb-15">
                                            <label for="name">Name:</label>
                                            <input id="name" placeholder="Name" type="text">
                                        </div>
                                        <div class="col-md-6 col-12 mb-15">
                                            <label for="email">Email:</label>
                                            <input id="email" placeholder="Email" type="text">
                                        </div>
                                        <div class="col-12 mb-15">
                                            <label for="your-review">Your Review:</label>
                                            <textarea name="review" id="your-review" placeholder="Write a review"></textarea>
                                        </div>
                                        <div class="col-12">
                                            <input value="add review" type="submit">
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>

                    </div>
                </div>

            </div>

        </div>

    </div>
</div>
<!-- Single Product Section End -->




<link href="~/Content/jquery.fancybox.css" rel="stylesheet" />

@section Scripts{

    <script src="~/Scripts/jquery.fancybox.js"></script>
    @*to pass a productID to External JS File*@

    @*<script>
        var productId = "@Model.Id";
        var productQuantity = Number(@Model.Quantity);

    </script>*@
    <script src="~/Scripts/productsDetails.js"></script>



    @*<script>
            /*
            *FancyBox
            */
            $(function () {
                $(".fancybox").fancybox();
            });
            ////////////////////////////////////
            /*
           *Add ToCart
           */

            //Change Event For Selected List
            var dropDownList = document.querySelector(".QuntList");
            var qtyDropList;
            if (dropDownList !== null) {
                dropDownList.addEventListener("change",function(e){
                    debugger;
                    e.preventDefault();
                    qtyDropList = $(this).val();
                    console.log(qtyDropList);
                });
            }

            $("a.addToCard").click(function (e) {
                e.preventDefault();
                debugger;
                var TestId ="@Model.Id";
                console.log(TestId);
                $("span.loader").addClass("ib");
                var url = "/Cart/AddToCartPartial";
                $.get(url, { id:@Model.Id , Qyt:qtyDropList} ,function(data){
                    $(".ajaxCart").html(data);
                }).done(function(){
                    $("span.loader").removeClass("ib");
                    $("span.ajaxMS").addClass("ib");

                    setTimeout(function(){
                        $("span.ajaxMS").fadeOut("fast");
                        $("span.ajaxMS").removeClass("ib");
                    },1500);
                    qtyDropList = null;

                    var url2 ="/Shop/GetProductQuantity";
                    debugger;
                    $.get(url2, { productId:@Model.Id} ,function(data){
                        debugger;
                        var checkValue = data.includes("</h4>");
                        if (checkValue) {
                            $(".product-btns").empty();
                            $(".product-btns").html(data);
                        }
                        else{
                            $(".QuntList").empty();
                            $(".QuntList").html(data);
                        }

                    }).done(function(){
                        console.log("done");
                    });
                });

            });

            ////////////////////////////////////
        </script>*@
}
